/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";let e=JSON.parse(localStorage.getItem("lists"))||["Sample List","cool list"],t=JSON.parse(localStorage.getItem("todos"))||[{list:"Sample List",todo:"This is a todo",dateAdd:"4/29/2021",dateComp:"N/A",priority:"Normal",notes:"This is a note"}];const o=()=>{localStorage.setItem("todos",JSON.stringify(t))},n=()=>{localStorage.setItem("lists",JSON.stringify(e))},i=document.getElementById("notes-text"),l=document.getElementById("date-added-text"),s=document.getElementById("date-completed-text"),d=document.getElementById("priority-button");let c;const r=()=>{console.log("filling current list");let e=[];const n=document.querySelector(".selected-list").innerHTML,r=document.getElementById("inner-active-list");e=t.filter((function(e){if(e.list==n)return!0})),r.innerHTML="",e.forEach((e=>{(e=>{let t=r.firstChild;const o=document.createElement("button");o.textContent=e.todo,o.classList.add("item"),o.classList.add(`${e.priority.toLowerCase()}-priority`),"N/A"!=e.dateComp&&o.classList.add("inactive"),r.insertBefore(o,t)})(e)})),r.firstChild.classList.add("selected-item"),t.find((e=>{const t=document.querySelector(".selected-item").innerHTML;console.log("current todo "+t),e.todo==t&&(console.log(e),c=e,i.innerHTML=e.notes,l.innerHTML=`Date Added: ${e.dateAdd}`,s.innerHTML=`Date Completed: ${e.dateComp}`,d.textContent=e.priority,d.className=`${e.priority.toLowerCase()}-priority`)})),o()},a=()=>{const t=document.querySelector(".sidebar-section"),i=document.getElementById("sidebar-list-view");document.querySelector(".sidebar-add");let l="off";document.addEventListener("click",(e=>{if(e.target.matches(".sidebar-add")&&"off"==l){console.log("add");const e=document.createElement("input");Object.assign(e,{className:"input-box",maxlength:"20",id:"new-list-input",type:"text",placeholder:"New List"}),t.appendChild(e),e.focus(),e.onblur=()=>{e.remove(),l="off"},l="on",s()}else e.target.matches(".sidebar-add")&&"on"==l&&(document.getElementById("new-list-input").remove(),l="off")}));const s=()=>{const e=document.getElementById("new-list-input");e.addEventListener("keydown",(t=>{13===t.keyCode&&""!=e.value&&(console.log("enter create new list"),l="off",d(),m(e.value),e.remove())}))},d=()=>{const t=document.getElementById("new-list-input");e.push(t.value),n(),o(),console.log(e)};document.addEventListener("click",(e=>{e.target.matches(".sidebar-list")&&(c(e.target),r())}));const c=e=>{const t=document.querySelector(".selected-list");a(t,e),console.log("select list")},a=(e,t)=>{null==e||e.classList.remove("selected-list"),t.classList.add("selected-list")},m=e=>{const t=document.createElement("p");t.classList.add("sidebar-list"),i.appendChild(t),t.innerHTML=e,console.log("listactions")};e.forEach((e=>{m(e)})),i.firstElementChild.classList.add("selected-list")};console.log("index.js test"),a(),(()=>{document.addEventListener("dblclick",(e=>{e.target.matches(".inactive")?(e.target.classList.remove("inactive"),console.log("unmark"),a()):e.target.matches(".item")&&(e.target.classList.add("inactive"),console.log("mark as done"),a())})),(()=>{const i=document.getElementById("new-todo-input");i.addEventListener("keydown",(e=>{13===e.keyCode&&""!=i.value&&(console.log("enter create new todo"),l(),s(),r(),o())})),document.addEventListener("click",(e=>{e.target.matches("#add-item-button-icon")&&""!=i.value&&(console.log("click create new todo"),l(),s(),r(),o())}));const l=()=>{const e=document.getElementById("inner-active-list");let t=e.firstChild;const o=document.createElement("button");o.textContent=i.value,o.classList.add("item"),o.classList.add("normal-priority"),e.insertBefore(o,t),n(o)},s=()=>{((o,n,i,l,s,d)=>{const c=((e,t,o,n,i,l)=>({list:e,todo:t,dateAdd:o,dateComp:"N/A",priority:"Normal",notes:""}))(o,n,(new Date).toLocaleDateString());t.push(c),-1==e.indexOf(o)&&e.push(c.list)})(document.querySelector(".selected-list").innerHTML,i.value),i.value=""}})(),document.addEventListener("click",(e=>{e.target.matches(".item")&&(n(e.target),r())}));const n=e=>{var t,o;t=document.querySelector(".selected-item"),o=e,null==t||t.classList.remove("selected-item"),o.classList.add("selected-item"),console.log("select")},i=document.getElementById("notes-text"),l=document.getElementById("date-added-text"),s=document.getElementById("date-completed-text"),d=document.getElementById("priority-button");let c;const r=()=>{t.find((e=>{const t=document.querySelector(".selected-item").innerHTML;console.log("current todo "+t),e.todo==t&&(console.log(e),c=e,i.innerHTML=e.notes,l.innerHTML=`Date Added: ${e.dateAdd}`,s.innerHTML=`Date Completed: ${e.dateComp}`,d.textContent=e.priority,d.className=`${e.priority.toLowerCase()}-priority`)}))},a=()=>{t.find((e=>{const t=document.querySelector(".selected-item").innerHTML;e.todo==t&&"N/A"==e.dateComp?(s.innerHTML=`Date Completed: ${(new Date).toLocaleDateString()}`,e.dateComp=(new Date).toLocaleDateString()):e.todo==t&&"N/A"!=e.dateComp&&(s.innerHTML="Date Completed: N/A",e.dateComp="N/A"),o()}))},m=(e,t,o,n,i)=>{const l=document.querySelector(".selected-item");l.innerHTML,d.textContent=e,d.className=t,l.classList.remove(o),l.classList.add(n),i.priority=e};d.onclick=()=>{console.log("set priority"),t.find((e=>{const t=document.querySelector(".selected-item").innerHTML;e.todo==t&&("Normal"==e.priority?m("Important","important-priority-button","normal-priority","important-priority",e):"Important"==e.priority?m("Low","low-priority-button","important-priority","low-priority",e):"Low"==e.priority&&m("Normal","normal-priority-button","low-priority","normal-priority",e))})),o()},i.onblur=()=>{c.notes=i.innerHTML,o()}})(),r(),(()=>{const i=document.getElementById("delete-all-button"),l=document.getElementById("delete-todo"),s=document.getElementById("sidebar-list-view");l.onclick=()=>{console.log("delete one"),t.filter((function(e){const o=document.querySelector(".selected-item").innerHTML;e.todo==o&&t.splice(t.indexOf(e),1)})),r(),o()},i.onclick=()=>{console.log("delete all"),t=t.filter((function(e){const t=document.querySelector(".selected-list").innerHTML;return e.list!=t||e.list==t&&"N/A"==e.dateComp})),r(),o()};document.getElementById("delete-list").onclick=()=>{console.log("list delete"),e.forEach((t=>{e.filter((function(t){t==document.querySelector(".selected-list").innerHTML&&e.splice(e.indexOf(t),1)}))})),t.forEach((e=>{t.filter((function(e){const o=document.querySelector(".selected-list").innerHTML;e.list==o&&t.splice(t.indexOf(e),1)}))})),s.innerHTML="",a(),r(),n()}})()})();